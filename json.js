const Products = [

    {
        image: "img/vicky 1.1.png",
        image2: "img/vicky 1.2.png",
        name: "VICKY 1",
        price: "$15,712",
        descripcion: "Este juguete mini Punto G recargable, de delicado  diseño e intensa vibraciones será tu mejor elección. Su diseño en la extremidad superior con mayor diámetro, lo hace sumamente estimulante con un mejor apoyo en la zona del punto G. Fácil control. Modo de uso. Mantenga presionado el botón de encendido durante 3 segundos para encender / apagar, la luz indicadora se enciende y comienza a vibrar.Cada vez que se presiona el botón de encendido, cambie el modo de vibración diferente.Durante la  carga, la luz indicadora parpadea, después de la carga completa, la luz sigue encendida.Cuando el producto se está cargando, el chip está en estado de protección y no se puede encender",
        categoria: "vibrador"
    },
    {
        image: "img/miky 4.png",
        image2: "img/miky 4.1.png",
        name: "MIKY 4",
        price: "$15,302",
        descripcion: "Este estimulador de punto G, tiene un diseño sofiticado, a puro glamour y elegantemente delicado e intenso. Su extremo curvo y sus bordes lisos te darán la posibilidad de estimularte la zona del punto G de manera diferente.",
        categoria: "vibrador"
    },
    {
        image: "img/katy 4.png",
        image2: "img/katy 4.1.png",
        name: "KATY 4",
        price: "$9,588",
        descripcion: "Este juguete es un vaginal corto con curvatura para estimular Punto G, de delicado  diseño e intensa vibración. Fácil control. Mantener pulsado durante 3 segundos para prender y apagar.",
        categoria: "vibrador"
    },
    {
        image: "img/diamont 1.1.png",
        image2: "img/diamont 1.png",
        name: "DIAMONT 1",
        price: "$27,442",
        descripcion: "¿Buscas sentirte diferente? El Vibrador Diamond,  tiene un diseño sofisticado a puro glamour, y elegantemente brillante e intenso. Con su doble motor estimulará completamente tu zona de punto G y clítoris de manera muy efectiva. Para una dosis extra de placer, combínalo con el serum lubricante EOS DSICOVER PUNTO G.",
        categoria: "estimulador"
    },
    {
        image: "img/male 2.png",
        image2: "img/male 2.1.png",
        name: "MALE 2",
        price: "$34,462",
        descripcion: "Este vibrador recargable de triple estimulación con su leve curvatura lisa en su extremo, un clitorial intenso y con cuentas anales en su otro extremo hará de éste; un poderoso y excitante juguete. Ideal mujeres intensas que quieren sentirse plenas. Su vaginal curvo hará que puedas disfrutar del apoyo perfecto en Punto G.",
        categoria: "estimulador"
    },
    {
        image: "img/luxe rabbit 1.png",
        image2: "img/luxe rabbit 1.1.png",
        name: "LUXE RABBIT",
        price: "$51,383",
        descripcion: "está equipado con características únicas para provocar y tentar. Eje giratorio de 3 velocidades a prueba de agua Tecnología Rolling WavesTM 7 Vibrador con función de estimulador del clítoris Elastómero puro seguro para la piel Libre de ftalato y látex El carro extraíble de la batería ahorra vida útil de la batería: requiere 3 baterías AAA Longitud: 9 pulgadas Longitud insertable: 4 pulgadas Ancho: 1.43 pulgadas Circunferencia: 4.5 pulgadas Peso del producto (sin paquete) : 8.6 onzas",
        categoria: "estimulador"
    },
    {
        image: "img/ana 8.png",
        image2: "img/JUGUETE 3.png",
        name: "ANA 8",
        price: "$35,238",
        descripcion: " Su intensa vibración se concentra a lo largo de todo el juguete y aún más fuerte en su cabezal, esto hace que puedas deslizarlo en tu zona genital y en cualquier otra parte del cuerpo donde necesites estimularte. Este masajeador contiene otro cabezal para poder experimentar los 10 niveles de succión que quieras en tu zona Clitorial. Modo de uso. Mantenga presionado el botón de encendido durante 3 segundos para encender / apagar, la luz indicadora se enciende y comienza a vibrar. Cada vez que se presiona el botón de encendido, cambie el modo de vibración diferente. Durante la carga, la luz indicadora parpadea, después de la carga completa, la luz sigue encendida. Cuando el producto se está cargando, el chip está en estado de protección y no se puede encender. Presione el botón derecho para ajustar los modos de pulsación del cabezal, 10 modos de pulsación de frecuencia. Presione el botón izquierdo para ajustar los 10 modos de vibración final. Cambie el cabezal para sus 10 niveles de succión. ",
        categoria: "succionador"
    },
    {
        image: "img/sofi 3.png",
        image2: "img/sofi 3.1.png",
        name: "SOFI 3",
        price: "$18,494",
        descripcion: "Este modelo de vibrador tiene un diámetro un poco más ancho en su extremo superior  y uno levemente menor  en su base, es muy suave e intenso. Con su doble motor estimulará completamente tu zona de vaginal y clítoris de manera muy efectiva. Apenas con una zona superior texturada y su estimulador de clítoris con un diseño de conejo con una solo oreja.",
        categoria: "estimulador"
    },
    {
        image: "img/vicky 1.1.png",
        image2: "img/vicky 1.2.png",
        name: "VICKY 1",
        price: "$15,712",
        descripcion: "Este juguete mini Punto G recargable, de delicado  diseño e intensa vibraciones será tu mejor elección. Su diseño en la extremidad superior con mayor diámetro, lo hace sumamente estimulante con un mejor apoyo en la zona del punto G. Fácil control. Modo de uso. Mantenga presionado el botón de encendido durante 3 segundos para encender / apagar, la luz indicadora se enciende y comienza a vibrar.Cada vez que se presiona el botón de encendido, cambie el modo de vibración diferente.Durante la  carga, la luz indicadora parpadea, después de la carga completa, la luz sigue encendida.Cuando el producto se está cargando, el chip está en estado de protección y no se puede encender",
        categoria: "vibrador"
    },
    {
        image: "img/miky 4.png",
        image2: "img/miky 4.1.png",
        name: "MIKY 4",
        price: "$15,302",
        descripcion: "Este estimulador de punto G, tiene un diseño sofiticado, a puro glamour y elegantemente delicado e intenso. Su extremo curvo y sus bordes lisos te darán la posibilidad de estimularte la zona del punto G de manera diferente.",
        categoria: "vibrador"
    },
    {
        image: "img/katy 4.png",
        image2: "img/katy 4.1.png",
        name: "KATY 4",
        price: "$9,588",
        descripcion: "Este juguete es un vaginal corto con curvatura para estimular Punto G, de delicado  diseño e intensa vibración. Fácil control. Mantener pulsado durante 3 segundos para prender y apagar.",
        categoria: "vibrador"
    },
    {
        image: "img/diamont 1.1.png",
        image2: "img/diamont 1.png",
        name: "DIAMONT 1",
        price: "$27,442",
        descripcion: "¿Buscas sentirte diferente? El Vibrador Diamond,  tiene un diseño sofisticado a puro glamour, y elegantemente brillante e intenso. Con su doble motor estimulará completamente tu zona de punto G y clítoris de manera muy efectiva. Para una dosis extra de placer, combínalo con el serum lubricante EOS DSICOVER PUNTO G.",
        categoria: "estimulador"
    },
    {
        image: "img/male 2.png",
        image2: "img/male 2.1.png",
        name: "MALE 2",
        price: "$34,462",
        descripcion: "Este vibrador recargable de triple estimulación con su leve curvatura lisa en su extremo, un clitorial intenso y con cuentas anales en su otro extremo hará de éste; un poderoso y excitante juguete. Ideal mujeres intensas que quieren sentirse plenas. Su vaginal curvo hará que puedas disfrutar del apoyo perfecto en Punto G.",
        categoria: "estimulador"
    },
    {
        image: "img/luxe rabbit 1.png",
        image2: "img/luxe rabbit 1.1.png",
        name: "LUXE RABBIT",
        price: "$51,383",
        descripcion: "está equipado con características únicas para provocar y tentar. Eje giratorio de 3 velocidades a prueba de agua Tecnología Rolling WavesTM 7 Vibrador con función de estimulador del clítoris Elastómero puro seguro para la piel Libre de ftalato y látex El carro extraíble de la batería ahorra vida útil de la batería: requiere 3 baterías AAA Longitud: 9 pulgadas Longitud insertable: 4 pulgadas Ancho: 1.43 pulgadas Circunferencia: 4.5 pulgadas Peso del producto (sin paquete) : 8.6 onzas",
        categoria: "estimulador"
    },
    {
        image: "img/ana 8.png",
        image2: "img/JUGUETE 3.png",
        name: "ANA 8",
        price: "$35,238",
        descripcion: " Su intensa vibración se concentra a lo largo de todo el juguete y aún más fuerte en su cabezal, esto hace que puedas deslizarlo en tu zona genital y en cualquier otra parte del cuerpo donde necesites estimularte. Este masajeador contiene otro cabezal para poder experimentar los 10 niveles de succión que quieras en tu zona Clitorial. Modo de uso. Mantenga presionado el botón de encendido durante 3 segundos para encender / apagar, la luz indicadora se enciende y comienza a vibrar. Cada vez que se presiona el botón de encendido, cambie el modo de vibración diferente. Durante la carga, la luz indicadora parpadea, después de la carga completa, la luz sigue encendida. Cuando el producto se está cargando, el chip está en estado de protección y no se puede encender. Presione el botón derecho para ajustar los modos de pulsación del cabezal, 10 modos de pulsación de frecuencia. Presione el botón izquierdo para ajustar los 10 modos de vibración final. Cambie el cabezal para sus 10 niveles de succión. ",
        categoria: "succionador"
    },
    {
        image: "img/sofi 3.png",
        image2: "img/sofi 3.1.png",
        name: "SOFI 3",
        price: "$18,494",
        descripcion: "Este modelo de vibrador tiene un diámetro un poco más ancho en su extremo superior  y uno levemente menor  en su base, es muy suave e intenso. Con su doble motor estimulará completamente tu zona de vaginal y clítoris de manera muy efectiva. Apenas con una zona superior texturada y su estimulador de clítoris con un diseño de conejo con una solo oreja.",
        categoria: "estimulador"

    },
];


// Convertir los precios en números antes de usar los productos
Products.forEach(producto => {
    producto.price = parseFloat(producto.price.replace(/[^0-9.-]+/g, ""));
});

// Generar el contenido de los productos
const productListContainer = document.getElementById("product-list");
const productHTML = Products.map((product) => `
    <div class="col">
        <div class="card h-100">
            <a href="descripcion.html?index=${Products.indexOf(product)}"> <!-- Agregamos el enlace aquí -->
                <img src="${product.image}" class="card-img-top object-fit-cover w-100" style="aspect-ratio: 1;" 
                    onmouseover="showImage(this, '${product.image2}')" 
                    onmouseout="showImage(this, '${product.image}')"
                    alt="...">
            </a>
            <div class="card-body">
                <h5 class="card-title" style="text-transform: uppercase; letter-spacing: 0.1em">${product.name}</h5>
                <p class="card-text">${formatPrice(product.price)}</p>
                 <button class="btn btn-primary" onclick="mostrarEnCarrito(${Products.indexOf(product)})">Agregar al carrito</button>
            </div>
        </div>
    </div>
`).join("");

// Insertar el contenido en el contenedor en el HTML
productListContainer.innerHTML = productHTML;


//CAMBIANDO IMAGENES EN LA SECCION DE "NUESTROS DESTACADOS"
// Función para mostrar la imagen grande
function showImage(element, imageUrl) {
    element.src = imageUrl;
}

//PLANTILLA

window.addEventListener("DOMContentLoaded", () => {
    const urlParams = new URLSearchParams(window.location.search);
    const productIndex = parseInt(urlParams.get("index"));

    if (!isNaN(productIndex) && productIndex >= 0 && productIndex < Products.length) {
        const selectedProduct = Products[productIndex];
        // Aquí puedes acceder a la información del producto seleccionado (selectedProduct)
        // y modificar el contenido HTML de "descripcion.html" para mostrar la descripción del producto.
        // Por ejemplo:
        document.getElementById("product-image").src = selectedProduct.image;
        document.getElementById("product-image2").src = selectedProduct.image2;
        document.getElementById("product-name").textContent = selectedProduct.name;
        document.getElementById("product-price").textContent = selectedProduct.price;
        document.getElementById("product-descripcion").textContent = selectedProduct.descripcion;
        // ... Agrega más código para mostrar otros detalles del producto si es necesario.
    } else {
        // Si el índice del producto no es válido o no se proporcionó, puedes mostrar un mensaje de error o redirigir al usuario a otra página.
    }

});


//CAMBIANDO NOMBRE H2 EN LA CATEGORIA

document.addEventListener("DOMContentLoaded", () => {
    const categoriaBtns = document.querySelectorAll(".categoria-btn");
    const categoryTitle = document.getElementById("category-title");

    categoriaBtns.forEach(btn => {
        btn.addEventListener("click", () => {
            const categoriaSeleccionada = btn.getAttribute("data-categoria");
            mostrarProductosPorCategoria(categoriaSeleccionada);

            // Actualizar el título del H2 con el nombre de la categoría seleccionada
            categoryTitle.textContent = categoriaSeleccionada;
        });
    });
});


// Función para filtrar y mostrar productos según la categoría
function mostrarProductosPorCategoria(categoria) {
    // Obtener el contenedor donde se mostrarán los productos
    const productosContainer = document.getElementById("product-list");

    // Filtrar los productos que pertenecen a la categoría seleccionada
    const productosFiltrados = Products.filter(producto => producto.categoria === categoria);

    // Limpiar el contenedor antes de agregar los productos filtrados
    productosContainer.innerHTML = "";

    // Agregar los productos filtrados al contenedor
    productosFiltrados.forEach(producto => {
        const productoHTML = `
            <div class="col">
                <div class="card h-100"> <!-- Usa la clase "card" aquí -->
                    <a href="descripcion.html?index=${Products.indexOf(producto)}">
                        <img src="${producto.image}" class="card-img-top object-fit-cover w-100" style="aspect-ratio: 1;" 
                            onmouseover="showImage(this, '${producto.image2}')" 
                            onmouseout="showImage(this, '${producto.image}')"
                            alt="...">
                    </a>
                    <div class="card-body">
                        <h5 class="card-title" style="text-transform: uppercase; letter-spacing: 0.1em">${producto.name}</h5>
                        <p class="card-text">${formatPrice(producto.price)}</p>
                        <button class="btn btn-primary" onclick="mostrarEnCarrito(${Products.indexOf(producto)})">Agregar al carrito</button>

                    </div>
                </div>
            </div>
        `;
        productosContainer.insertAdjacentHTML("beforeend", productoHTML);
    });
}

const carritoContainer = document.getElementById('carritoContainer');
let carritoProductos = [];

function agregarAlCarrito(producto) {
    // Verificar si el objeto producto existe y no es nulo
    if (producto && typeof producto === 'object') {
        // Verificar si el objeto producto tiene las propiedades requeridas
        if (producto.name && producto.price && producto.image) {
            const existeEnCarrito = carritoProductos.some((item) => item.name === producto.name);
            const totalAmountElement = document.getElementById('totalAmount');

            if (!existeEnCarrito) {
                // Verificar que el precio sea un número válido
                if (!isNaN(parseFloat(producto.price))) {
                    producto.price = parseFloat(producto.price).toString(); // Convertir el precio a cadena
                    carritoProductos.push({ ...producto, cantidad: 1 });
                } else {
                    console.error("El precio del producto no es un número válido:", producto.price);
                    return; // Salir de la función si el precio no es válido
                }
            } else {
                carritoProductos = carritoProductos.map((item) =>
                    item.name === producto.name ? { ...item, cantidad: item.cantidad + 1 } : item
                );

                // Actualizar el almacenamiento local con los datos del carrito
                localStorage.setItem('carrito', JSON.stringify(carritoProductos));
            }

            // Mostrar el toast usando Toastify
            Toastify({
                text: `${producto.name} ha sido agregado al carrito.`,
                duration: 3000,
                position: "center",
                close: true,
                style: {
                    background: "linear-gradient(to right, #00b09b, #96c93d)",
                },
            }).showToast();

            // Actualizar el contenido del carrito después de agregar el producto
            actualizarCarrito();
        } else {
            console.error("El objeto producto no contiene todas las propiedades necesarias.");
        }
    } else {
        console.error("El objeto producto no es válido o está ausente.");
    }
}
function formatPrice(price) {
    return '$' + price.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
}

// Función para restar cantidad de un producto en el carrito
function restarCantidad(itemName) {
    const producto = carritoProductos.find((item) => item.name === itemName);

    if (producto && producto.cantidad > 1) {
        producto.cantidad -= 1;
    }
    localStorage.setItem('carrito', JSON.stringify(carritoProductos));
    actualizarCarrito();
}

// Función para sumar cantidad de un producto en el carrito
function sumarCantidad(itemName) {
    const producto = carritoProductos.find((item) => item.name === itemName);

    if (producto) {
        producto.cantidad += 1;
    }
    localStorage.setItem('carrito', JSON.stringify(carritoProductos));
    actualizarCarrito();
}

// Función CARRITO
function eliminarDelCarrito(nombreProducto) {
    carritoProductos = carritoProductos.filter((item) => item.name !== nombreProducto);
    actualizarCarrito();

    // Actualizar el almacenamiento local con los datos del carrito
    localStorage.setItem('carrito', JSON.stringify(carritoProductos));
}

// Función para cargar los datos del carrito desde el almacenamiento local
function cargarCarritoDesdeLocalStorage() {
    const carritoGuardado = localStorage.getItem('carrito');
    if (carritoGuardado) {
        carritoProductos = JSON.parse(carritoGuardado);
        actualizarCarrito(); // Actualizar el contenido del carrito al cargar los datos desde el almacenamiento local
    }
}

// Llamar a la función para cargar los datos del carrito al iniciar la aplicación
cargarCarritoDesdeLocalStorage();


// Evento para detectar cambios en la URL (enrutamiento)
window.addEventListener('popstate', () => {
    const url = window.location.pathname;
    const currentPage = url.substring(url.lastIndexOf('/') + 1);

    // Verificar si la URL actual es diferente a "descripcion.html"
    if (currentPage !== 'descripcion.html') {
        actualizarCarrito();
    }
});

// Evento cuando el contenido de la página se carga por completo
document.addEventListener('DOMContentLoaded', () => {
    cargarCarritoDesdeLocalStorage();
});


function actualizarCarrito() {
    const carritoContent = document.getElementById('carritoContent');
    carritoContent.innerHTML = ''; // Limpiamos el contenido antes de actualizar

    let total = 0; // Variable para calcular el precio total
    let inputCounter = 0; // Contador para IDs únicos de input

    if (carritoProductos.length === 0) {
        // Si el carrito está vacío, mostramos un mensaje
        carritoContent.innerHTML = `
            <p>No hay productos en el carrito.</p>
        `;
    } else {
        // Si hay productos en el carrito, creamos una tarjeta para cada producto
        carritoProductos.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'card mb-3';
            card.style.maxWidth = '540px';

            const cardBody = document.createElement('div');
            cardBody.className = 'row g-0';
            card.appendChild(cardBody);

            const imgContainer = document.createElement('div');
            imgContainer.className = 'container p-2 col-md-4';
            cardBody.appendChild(imgContainer);

            const img = document.createElement('img');
            img.src = item.image;
            img.className = 'img-fluid rounded-start';
            img.alt = '...';
            imgContainer.appendChild(img);

            const infoContainer = document.createElement('div');
            infoContainer.className = 'col-md-4';
            cardBody.appendChild(infoContainer);

            const title = document.createElement('h5');
            title.className = 'card-title mt-4';
            title.textContent = item.name;
            infoContainer.appendChild(title);

            const price = document.createElement('p');
            price.className = 'card-text';
            const totalPrice = item.price * item.cantidad; // Calcular el precio total por producto
            price.textContent = formatPrice(totalPrice); // Formatear el precio con el símbolo "$" y separadores de miles
            infoContainer.appendChild(price);

            const buttonContainer = document.createElement('div');
            buttonContainer.className = 'col-md-3  mt-2';
            cardBody.appendChild(buttonContainer);

            const deleteButton = document.createElement('button');
            deleteButton.className = 'btn btn-primary';
            deleteButton.textContent = 'Borrar';
            deleteButton.onclick = () => eliminarDelCarrito(item.name);
            buttonContainer.appendChild(deleteButton);

            const quantityContainer = document.createElement('div');
            quantityContainer.className = 'col-md text-center'; // Agregamos la clase "text-center" para centrar el contenido
            cardBody.appendChild(quantityContainer);

            const quantityLabel = document.createElement('label');
            quantityLabel.htmlFor = `cantidad${index}`; // Usar el mismo índice para el id del campo de cantidad
            quantityLabel.textContent = 'Cantidad:';
            quantityContainer.appendChild(quantityLabel);

            const quantityInputGroup = document.createElement('div');
            quantityInputGroup.className = 'input-group'; // Agregamos la clase "input-group" para mostrar los botones dentro del input
            quantityContainer.appendChild(quantityInputGroup);

            const quantityDecreaseButton = document.createElement('button');
            quantityDecreaseButton.type = 'button';
            quantityDecreaseButton.className = 'btn btn-outline-secondary';
            quantityDecreaseButton.textContent = '-';
            quantityDecreaseButton.onclick = () => restarCantidad(item.name); // Llamamos a la función para restar la cantidad
            quantityInputGroup.appendChild(quantityDecreaseButton);

            const quantityInput = document.createElement('input');
            quantityInput.type = 'number';
            quantityInput.name = `cantidad${index}`; // Asignar un nombre único usando el índice
            quantityInput.id = `cantidad${index}`; // Asignar un ID único usando el índice
            quantityInput.className = 'form-control';
            quantityInput.value = item.cantidad;
            quantityInput.min = '1';
            quantityInput.onchange = () => actualizarCantidad(item.name, quantityInput.value);
            quantityInputGroup.appendChild(quantityInput);

            const quantityIncreaseButton = document.createElement('button');
            quantityIncreaseButton.type = 'button';
            quantityIncreaseButton.className = 'btn btn-outline-secondary';
            quantityIncreaseButton.textContent = '+';
            quantityIncreaseButton.onclick = () => sumarCantidad(item.name); // Llamamos a la función para sumar la cantidad
            quantityInputGroup.appendChild(quantityIncreaseButton);

            carritoContent.appendChild(card);


            // Calculamos el precio total del producto (precio * cantidad)
            const precioTotalProducto = item.price * item.cantidad;
            total += precioTotalProducto; // Acumulamos el precio total del producto al total general
        });
    }

    // Mostramos el total en el elemento con id "totalAmount"
    const totalAmountElement = document.getElementById('totalAmount');
    if (totalAmountElement) {
        totalAmountElement.textContent = formatPrice(total); // Utilizamos la función formatPrice para formatear el total con el símbolo "$" y separadores de miles
    }
}


// Función para actualizar la cantidad de un producto en el carrito
function actualizarCantidad(nombreProducto, cantidad) {
    carritoProductos = carritoProductos.map((item) =>
        item.name === nombreProducto ? { ...item, cantidad: parseInt(cantidad) } : item
    );
    actualizarCarrito();
}

// Función para mostrar los productos en el carrito al hacer clic
function mostrarEnCarrito(index) {
    const producto = Products[index];
    agregarAlCarrito(producto);
}

document.addEventListener("DOMContentLoaded", function () {
    // Obtén el parámetro de consulta 'query' de la URL
    const urlParams = new URLSearchParams(window.location.search);
    const query = urlParams.get('query');

    // Filtra los productos que coincidan con la búsqueda
    const productosFiltrados = Products.filter(producto => {
        // Aquí definimos la lógica de filtrado
        const nombreEnMinusculas = producto.name.toLowerCase();
        const descripcionEnMinusculas = producto.descripcion.toLowerCase();
        const categoriaEnMinusculas = producto.categoria.toLowerCase(); // Asegúrate de que la propiedad 'categoria' exista en tus objetos de producto

        // Comprueba si el nombre, descripción o categoría contienen el término de búsqueda
        return (
            nombreEnMinusculas.includes(query.toLowerCase()) ||
            descripcionEnMinusculas.includes(query.toLowerCase()) ||
            categoriaEnMinusculas.includes(query.toLowerCase())
        );
    });

    // Obtén el contenedor de la lista de productos en tu página HTML
    const productListContainer = document.getElementById("product-list");

    // Genera el contenido de las tarjetas y lo inserta en el contenedor
    const productHTML = productosFiltrados.map(product => `
         <div class="col">
        <div class="card h-100">
            <a href="descripcion.html?index=${Products.indexOf(product)}"> <!-- Agregamos el enlace aquí -->
                <img src="${product.image}" class="card-img-top object-fit-cover w-100" style="aspect-ratio: 1;" 
                    onmouseover="showImage(this, '${product.image2}')" 
                    onmouseout="showImage(this, '${product.image}')"
                    alt="...">
            </a>
            <div class="card-body">
                <h5 class="card-title" style="text-transform: uppercase; letter-spacing: 0.1em">${product.name}</h5>
                <p class="card-text">${formatPrice(product.price)}</p>
                 <button class="btn btn-primary" onclick="mostrarEnCarrito(${Products.indexOf(product)})">Agregar al carrito</button>
            </div>
        </div>
    </div>
    `).join("");

    // Insertar el contenido en el contenedor en el HTML
    productListContainer.innerHTML = productHTML;
});

function cargarProdcutosMSG() {
    let inputCarrito = document.getElementById("producto-carrito")
    console.log(inputCarrito.value)
    carritoProductos.forEach((producto) => (inputCarrito.value = inputCarrito.value + ` ${producto.name} + ${producto.cantidad}||`))


    console.log(inputCarrito.value)
}


console.log()

const mercadopago = new MercadoPago('APP_USR-6121c894-2604-42cb-abae-e813f0eece99', {
    locale: 'es-AR' // The most common are: 'pt-BR', 'es-AR' and 'en-US'
});

// Handle call to backend and generate preference.

document.getElementById("checkout-btn").addEventListener("click", function () {

    document.getElementById('totalAmount').innerHTML

    const orderData = {
        quantity: 1,
        description: "Productos",
        price: 100
    };

    fetch("http://localhost:8080/create_preference", {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify(orderData),
    })
        .then(function (response) {
            return response.json();
        })
        .then(function (init_point) {
            console.log(init_point["id"])
        })
        .catch(function () {
            alert("Unexpected error");
            $('#checkout-btn').attr("disabled", false);
        });
});



